platform: linux

image_resource:
  type: docker-image
  source: {repository: golang}

inputs:
- name: git-source
outputs:
- name: task-output

caches:
- path: gopath/

run:
  path: /bin/bash 
  args:
    - -c 
    - |
      git-source/ci/unit.sh || (git-source/ci/unit.sh > task-output/result.txt; exit 1)
